"use strict";(self.webpackChunkclic_app=self.webpackChunkclic_app||[]).push([[300],{7300:(_,v,a)=>{a.r(v),a.d(v,{AuthModule:()=>F});var g=a(6895),c=a(2655),e=a(8256),s=a(433);let C=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-forgot"]],decls:28,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-xl-10","col-lg-12","col-md-9"],[1,"card","o-hidden","border-0","shadow-lg","my-5"],[1,"card-body","p-0"],[1,"row"],[1,"col-lg-6","d-none","d-lg-block","bg-password-image"],[1,"col-lg-6"],[1,"p-5"],[1,"text-center"],[1,"h4","text-gray-900","mb-2"],[1,"mb-4"],[1,"user"],[1,"form-group"],["type","email","id","exampleInputEmail","aria-describedby","emailHelp","placeholder","Enter Email Address...",1,"form-control","form-control-user"],["routerLink","/auth/sing-in",1,"btn","btn-primary","btn-user","btn-block"],["routerLink","/auth/register",1,"small"],["routerLink","/auth/sing-in",1,"small"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"test eliminar"),e.qZA(),e.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),e._UZ(8,"div",6),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"h1",10),e._uU(13,"Forgot Your Password?"),e.qZA(),e.TgZ(14,"p",11),e._uU(15,"We get it, stuff happens. Just enter your email address below and we'll send you a link to reset your password!"),e.qZA()(),e.TgZ(16,"form",12)(17,"div",13),e._UZ(18,"input",14),e.qZA(),e.TgZ(19,"a",15),e._uU(20," Reset Password "),e.qZA()(),e._UZ(21,"hr"),e.TgZ(22,"div",9)(23,"a",16),e._uU(24,"Create an Account!"),e.qZA()(),e.TgZ(25,"div",9)(26,"a",17),e._uU(27,"Already have an account? Login!"),e.qZA()()()()()()()()()())},dependencies:[s._Y,s.JL,c.yS]}),t})();var Z=a(4849),f=a(5861),p=a(6754),l=a(89),y=a(2810),h=a(9154);let w=(()=>{class t{constructor(r,o,i){this.auth=r,this.firestore=o,this._toast=i,this.userCollection=(0,y.hJ)(this.firestore,"user")}login({email:r,password:o}){var i=this;return(0,f.Z)(function*(){return yield(0,p.e5)(i.auth,r,o)})()}logout(){return(0,p.w7)(this.auth)}register(r){var o=this;return(0,f.Z)(function*(){const{email:i,password:d}=r;r.password="";const u=(0,p.Xb)(o.auth,i,d),L=(0,l.JU)(o.firestore,`usuarios/${u.userCredential.uid}`);(0,l.r7)(L,{...r})})()}getAll(){return(0,l.BS)(this.userCollection,{idField:"id"})}get(r){const o=(0,l.JU)(this.firestore,`user/${r}`);return(0,l._1)(o,{idField:"id"})}create(r){return(0,l.ET)(this.userCollection,r)}update(r){const o=(0,l.JU)(this.firestore,`user/${r?.id}`);return(0,l.r7)(o,{...r})}delete(r){const o=(0,l.JU)(this.firestore,`user/${r}`);return(0,l.oe)(o)}get currentUser(){return this.auth.currentUser}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(p.gx),e.LFG(l.gg),e.LFG(h.k))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const m=function(t,n){return{"is-invalid":t,"is-valid":n}};let A=(()=>{class t extends Z.l{constructor(r,o,i){super(),this._service=r,this.fb=o,this._toast=i,this.minPassLength=6}ngOnInit(){this.buildingForm()}onSubmit(){const r=this.getUserForm();try{const o=this._service.register(r);console.log(o),null!=o&&(this.form.reset(),this._toast.show("Usuario registrado exitosamente.","success"))}catch(o){this._toast.show("Obs. Ha ocurrido un error al registrar el usuario.","danger"),console.log(o.code)}}buildingForm(){this.form=this.fb.group({firstName:["",[s.kI.required,s.kI.minLength(2),s.kI.maxLength(30),s.kI.pattern(/^[A-Za-z\s\xF1\xD1]+$/)]],lastName:["",[s.kI.required,s.kI.minLength(2),s.kI.maxLength(30),s.kI.pattern(/^[A-Za-z\s\xF1\xD1]+$/)]],email:["",[s.kI.required,s.kI.pattern(/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/)]],passwordGroup:this.fb.group({password:["",[s.kI.required,s.kI.minLength(4),s.kI.maxLength(30)]],confirmPassword:["",[s.kI.required,s.kI.minLength(4),s.kI.maxLength(30)]]},{validator:this.passwordMatchValidator})})}getUserForm(){const{firstName:r,lastName:o,email:i,password:d,rol:u}=this.form.value;return{fullName:`${r} ${o}`,email:i,password:d,rol:u,status:!1,room:""}}passwordMatchValidator(r){if(r.dirty){const{password:o,confirmPassword:i}=r.value;o!==i?r.get("confirmPassword")?.setErrors({mismatch:!0}):r.get("confirmPassword")?.setErrors({mismatch:!1})}}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(w),e.Y36(s.qu),e.Y36(h.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],features:[e.qOj],decls:32,vars:22,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-6","col-xl-5","col-xxl-5"],[1,"card","o-hidden","border-0","shadow-lg","my-5"],[1,"card-body","p-0"],[1,"row"],[1,"col-lg-12"],[1,"p-5"],[1,"text-center"],[1,"h4","text-gray-900","mb-4"],[1,"row","g-3",3,"formGroup"],[1,"col-sm-6"],["type","text","formControlName","firstName","id","firstName","placeholder","Nombre",1,"form-control","form-control-user",3,"ngClass"],["type","text","formControlName","lastName","id","LastName","placeholder","Apellido",1,"form-control","form-control-user",3,"ngClass"],[1,"col-sm-12"],["type","email","formControlName","email","id","email","placeholder","Correo",1,"form-control","form-control-user",3,"ngClass"],["formGroupName","passwordGroup"],["type","password","formControlName","password","id","password","placeholder","Clave",1,"form-control","mb-3",3,"ngClass"],["type","password","formControlName","confirmPassword","id","confirmPassword","placeholder","Repita la Clave",1,"form-control",3,"ngClass"],[1,"btn","btn-primary","btn-user","btn-block",3,"disabled","click"],["routerLink","/auth/forgot",1,"small"],["routerLink","/auth/sing-in",1,"small"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h1",9),e._uU(10,"\xa1Crea una cuenta!"),e.qZA()(),e.TgZ(11,"form",10)(12,"div",11),e._UZ(13,"input",12),e.qZA(),e.TgZ(14,"div",11),e._UZ(15,"input",13),e.qZA(),e.TgZ(16,"div",14),e._UZ(17,"input",15),e.qZA(),e.TgZ(18,"div",16)(19,"div",14),e._UZ(20,"input",17),e.qZA(),e.TgZ(21,"div",14),e._UZ(22,"input",18),e.qZA()(),e.TgZ(23,"button",19),e.NdJ("click",function(){return o.onSubmit()}),e._uU(24," Registrar "),e.qZA()(),e._UZ(25,"hr"),e.TgZ(26,"div",8)(27,"a",20),e._uU(28,"\xbfHas olvidado tu contrase\xf1a?"),e.qZA()(),e.TgZ(29,"div",8)(30,"a",21),e._uU(31,"\xbfYa tienes una cuenta? \xa1inicia sesi\xf3n!"),e.qZA()()()()()()()()()()),2&r&&(e.xp6(11),e.Q6J("formGroup",o.form),e.xp6(2),e.Q6J("ngClass",e.WLB(7,m,o.isInvalid("firstName"),o.isValid("firstName"))),e.xp6(2),e.Q6J("ngClass",e.WLB(10,m,o.isInvalid("lastName"),o.isValid("lastName"))),e.xp6(2),e.Q6J("ngClass",e.WLB(13,m,o.isInvalid("email"),o.isValid("email"))),e.xp6(3),e.Q6J("ngClass",e.WLB(16,m,o.isInvalid("passwordGroup.password"),o.isValid("passwordGroup.password"))),e.xp6(2),e.Q6J("ngClass",e.WLB(19,m,o.isInvalid("passwordGroup.confirmPassword"),o.isValid("passwordGroup.confirmPassword"))),e.xp6(1),e.Q6J("disabled",o.form.invalid))},dependencies:[g.mk,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,s.x0,c.yS],encapsulation:2}),t})();const b=function(t,n){return{"is-invalid":t,"is-valid":n}},k=function(){return["/auth/forgot"]},U=function(){return["/auth/register"]},I=[{path:"sing-in",component:(()=>{class t extends Z.l{constructor(r,o,i,d){super(),this._service=r,this.fb=o,this._router=i,this._toast=d}ngOnInit(){this.buildingForm()}onSubmit(){var r=this;return(0,f.Z)(function*(){const{email:o,password:i}=r.form.value;try{yield r._service.login({email:o,password:i}),r._toast.show("Bienvenido!!!.","info"),r._router.navigate(["/cites"]),r.form.reset()}catch(d){let u="";switch(d.code){case"auth/user-not-found":case"auth/wrong-password":u="Usuario y clave invalido.";break;default:u="Error desconocido."}console.log(d.code),r._toast.show(u,"danger")}})()}buildingForm(){this.form=this.fb.group({email:["",[s.kI.required,s.kI.pattern(/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/)]],password:["",[s.kI.required]]})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(w),e.Y36(s.qu),e.Y36(c.F0),e.Y36(h.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-sing-in"]],features:[e.qOj],decls:34,vars:14,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-xl-6","col-lg-6","col-md-6"],[1,"card","o-hidden","border-0","shadow-lg","my-5"],[1,"card-body","p-0"],[1,"row"],[1,"col"],[1,"p-5"],[1,"text-center"],[1,"h4","text-gray-900","mb-4"],[1,"row","g-3",3,"formGroup"],[1,"col-md-12"],["for","email",1,"form-label"],["type","email","formControlName","email","id","email","aria-describedby","email","placeholder","Ingrese su correo...",1,"form-control",3,"ngClass"],["for","password",1,"form-label"],["type","password","formControlName","password","id","password","placeholder","Ingrese su clave...",1,"form-control","form-control-user",3,"ngClass"],[1,"d-flex"],[1,"form-check","form-switch","ml-auto"],["type","checkbox","id","flexSwitchCheckDefault","disabled","",1,"form-check-input"],["for","flexSwitchCheckDefault",1,"form-check-label"],[1,"btn","btn-primary","btn-user","btn-block",3,"disabled","click"],[1,"small",3,"routerLink"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h1",9),e._uU(10,"Bienvenido!"),e.qZA()(),e.TgZ(11,"form",10)(12,"div",11)(13,"label",12),e._uU(14,"Correro"),e.qZA(),e._UZ(15,"input",13),e.qZA(),e.TgZ(16,"div",11)(17,"label",14),e._uU(18,"Clave"),e.qZA(),e._UZ(19,"input",15),e.qZA(),e.TgZ(20,"div",16)(21,"div",17),e._UZ(22,"input",18),e.TgZ(23,"label",19),e._uU(24,"Recordar"),e.qZA()()(),e.TgZ(25,"button",20),e.NdJ("click",function(){return o.onSubmit()}),e._uU(26," Iniciar "),e.qZA()(),e._UZ(27,"hr"),e.TgZ(28,"div",8)(29,"a",21),e._uU(30,"\xbfHas olvidado tu calve?"),e.qZA()(),e.TgZ(31,"div",8)(32,"a",21),e._uU(33,"\xa1Crea una cuenta!"),e.qZA()()()()()()()()()()),2&r&&(e.xp6(11),e.Q6J("formGroup",o.form),e.xp6(4),e.Q6J("ngClass",e.WLB(6,b,o.isInvalid("email"),o.isValid("email"))),e.xp6(4),e.Q6J("ngClass",e.WLB(9,b,o.isInvalid("password"),o.isValid("password"))),e.xp6(6),e.Q6J("disabled",o.form.invalid),e.xp6(4),e.Q6J("routerLink",e.DdM(12,k)),e.xp6(3),e.Q6J("routerLink",e.DdM(13,U)))},dependencies:[g.mk,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,c.yS],encapsulation:2}),t})()},{path:"forgot",component:C},{path:"register",component:A},{path:"",pathMatch:"full",redirectTo:"sing-in"}];let T=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Bz.forChild(I),c.Bz]}),t})(),F=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.ez,s.UX,T]}),t})()}}]);